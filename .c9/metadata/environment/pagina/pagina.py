{"filter":false,"title":"pagina.py","tooltip":"/pagina/pagina.py","undoManager":{"mark":85,"position":85,"stack":[[{"start":{"row":50,"column":150},"end":{"row":51,"column":0},"action":"insert","lines":["",""],"id":2},{"start":{"row":51,"column":0},"end":{"row":51,"column":4},"action":"insert","lines":["    "]}],[{"start":{"row":51,"column":4},"end":{"row":51,"column":150},"action":"insert","lines":["artifact_path_confusion_matrix = \"mlflow-artifacts:/568376531369023149/a4fc0d31fb374ef68bc309378caeb5a6/artifacts/evaluation/confusion_matrix.png\""],"id":3}],[{"start":{"row":51,"column":34},"end":{"row":51,"column":35},"action":"insert","lines":["_"],"id":4},{"start":{"row":51,"column":35},"end":{"row":51,"column":36},"action":"insert","lines":["R"]},{"start":{"row":51,"column":36},"end":{"row":51,"column":37},"action":"insert","lines":["G"]}],[{"start":{"row":51,"column":36},"end":{"row":51,"column":37},"action":"remove","lines":["G"],"id":5}],[{"start":{"row":51,"column":36},"end":{"row":51,"column":37},"action":"insert","lines":["L"],"id":6}],[{"start":{"row":52,"column":4},"end":{"row":52,"column":5},"action":"remove","lines":["#"],"id":7}],[{"start":{"row":52,"column":32},"end":{"row":52,"column":33},"action":"insert","lines":["_"],"id":8},{"start":{"row":52,"column":33},"end":{"row":52,"column":34},"action":"insert","lines":["R"]},{"start":{"row":52,"column":34},"end":{"row":52,"column":35},"action":"insert","lines":["L"]}],[{"start":{"row":51,"column":41},"end":{"row":51,"column":148},"action":"remove","lines":["mlflow-artifacts:/568376531369023149/a4fc0d31fb374ef68bc309378caeb5a6/artifacts/evaluation/confusion_matrix"],"id":9},{"start":{"row":51,"column":41},"end":{"row":51,"column":150},"action":"insert","lines":["mlflow-artifacts:/568376531369023149/19a0e0342f0a4bdaaab2ebf89b62ca92/artifacts/plots/confusion_matrix_counts"]}],[{"start":{"row":52,"column":39},"end":{"row":52,"column":137},"action":"remove","lines":["mlflow-artifacts:/568376531369023149/9626f4dcb5e348f49a7d710effedb1d4/artifacts/learning_curve.png"],"id":10},{"start":{"row":52,"column":39},"end":{"row":52,"column":151},"action":"insert","lines":["mlflow-artifacts:/568376531369023149/19a0e0342f0a4bdaaab2ebf89b62ca92/artifacts/plots/precision_recall_curve.png"]}],[{"start":{"row":56,"column":4},"end":{"row":56,"column":5},"action":"remove","lines":["#"],"id":11}],[{"start":{"row":58,"column":4},"end":{"row":58,"column":5},"action":"remove","lines":["#"],"id":12}],[{"start":{"row":56,"column":103},"end":{"row":57,"column":0},"action":"insert","lines":["",""],"id":13},{"start":{"row":57,"column":0},"end":{"row":57,"column":4},"action":"insert","lines":["    "]}],[{"start":{"row":57,"column":4},"end":{"row":57,"column":103},"action":"insert","lines":["mlflow.artifacts.download_artifacts(artifact_uri=artifact_path_learning_curve, dst_path=IMAGES_DIR)"],"id":14}],[{"start":{"row":59,"column":110},"end":{"row":60,"column":0},"action":"insert","lines":["",""],"id":15},{"start":{"row":60,"column":0},"end":{"row":60,"column":4},"action":"insert","lines":["    "]}],[{"start":{"row":60,"column":4},"end":{"row":60,"column":110},"action":"insert","lines":["local_path = mlflow.artifacts.download_artifacts(artifact_uri=artifact_path_selector, dst_path=\"./Modelo\")"],"id":16}],[{"start":{"row":57,"column":81},"end":{"row":57,"column":82},"action":"insert","lines":["_"],"id":17},{"start":{"row":57,"column":82},"end":{"row":57,"column":83},"action":"insert","lines":["R"]},{"start":{"row":57,"column":83},"end":{"row":57,"column":84},"action":"insert","lines":["L"]}],[{"start":{"row":56,"column":80},"end":{"row":56,"column":81},"action":"remove","lines":["e"],"id":18}],[{"start":{"row":56,"column":79},"end":{"row":56,"column":80},"action":"remove","lines":["v"],"id":19},{"start":{"row":56,"column":78},"end":{"row":56,"column":79},"action":"remove","lines":["r"]},{"start":{"row":56,"column":77},"end":{"row":56,"column":78},"action":"remove","lines":["u"]},{"start":{"row":56,"column":76},"end":{"row":56,"column":77},"action":"remove","lines":["c"]},{"start":{"row":56,"column":75},"end":{"row":56,"column":76},"action":"remove","lines":["_"]},{"start":{"row":56,"column":74},"end":{"row":56,"column":75},"action":"remove","lines":["g"]},{"start":{"row":56,"column":73},"end":{"row":56,"column":74},"action":"remove","lines":["n"]},{"start":{"row":56,"column":72},"end":{"row":56,"column":73},"action":"remove","lines":["i"]},{"start":{"row":56,"column":71},"end":{"row":56,"column":72},"action":"remove","lines":["n"]},{"start":{"row":56,"column":70},"end":{"row":56,"column":71},"action":"remove","lines":["r"]},{"start":{"row":56,"column":69},"end":{"row":56,"column":70},"action":"remove","lines":["a"]},{"start":{"row":56,"column":68},"end":{"row":56,"column":69},"action":"remove","lines":["e"]},{"start":{"row":56,"column":67},"end":{"row":56,"column":68},"action":"remove","lines":["l"]}],[{"start":{"row":56,"column":67},"end":{"row":56,"column":68},"action":"insert","lines":["c"],"id":20},{"start":{"row":56,"column":68},"end":{"row":56,"column":69},"action":"insert","lines":["o"]},{"start":{"row":56,"column":69},"end":{"row":56,"column":70},"action":"insert","lines":["m"]},{"start":{"row":56,"column":70},"end":{"row":56,"column":71},"action":"insert","lines":["n"]}],[{"start":{"row":56,"column":70},"end":{"row":56,"column":71},"action":"remove","lines":["n"],"id":21},{"start":{"row":56,"column":69},"end":{"row":56,"column":70},"action":"remove","lines":["m"]}],[{"start":{"row":56,"column":69},"end":{"row":56,"column":70},"action":"insert","lines":["f"],"id":22}],[{"start":{"row":56,"column":69},"end":{"row":56,"column":70},"action":"remove","lines":["f"],"id":23}],[{"start":{"row":56,"column":69},"end":{"row":56,"column":70},"action":"insert","lines":["n"],"id":24},{"start":{"row":56,"column":70},"end":{"row":56,"column":71},"action":"insert","lines":["f"]},{"start":{"row":56,"column":71},"end":{"row":56,"column":72},"action":"insert","lines":["u"]},{"start":{"row":56,"column":72},"end":{"row":56,"column":73},"action":"insert","lines":["s"]}],[{"start":{"row":56,"column":53},"end":{"row":56,"column":73},"action":"remove","lines":["artifact_path_confus"],"id":25},{"start":{"row":56,"column":53},"end":{"row":56,"column":83},"action":"insert","lines":["artifact_path_confusion_matrix"]}],[{"start":{"row":56,"column":83},"end":{"row":56,"column":84},"action":"insert","lines":["_"],"id":26}],[{"start":{"row":56,"column":53},"end":{"row":56,"column":84},"action":"remove","lines":["artifact_path_confusion_matrix_"],"id":27},{"start":{"row":56,"column":53},"end":{"row":56,"column":86},"action":"insert","lines":["artifact_path_confusion_matrix_RL"]}],[{"start":{"row":60,"column":4},"end":{"row":60,"column":5},"action":"insert","lines":["#"],"id":28}],[{"start":{"row":59,"column":4},"end":{"row":59,"column":5},"action":"insert","lines":["#"],"id":29}],[{"start":{"row":605,"column":0},"end":{"row":606,"column":0},"action":"remove","lines":["",""],"id":30},{"start":{"row":604,"column":0},"end":{"row":605,"column":0},"action":"remove","lines":["",""]},{"start":{"row":603,"column":96},"end":{"row":604,"column":0},"action":"remove","lines":["",""]}],[{"start":{"row":578,"column":19},"end":{"row":578,"column":31},"action":"remove","lines":["summary.json"],"id":31},{"start":{"row":578,"column":19},"end":{"row":578,"column":39},"action":"insert","lines":["/pagina/summary.json"]}],[{"start":{"row":578,"column":19},"end":{"row":578,"column":20},"action":"insert","lines":["."],"id":32}],[{"start":{"row":52,"column":152},"end":{"row":53,"column":0},"action":"insert","lines":["",""],"id":33},{"start":{"row":53,"column":0},"end":{"row":53,"column":4},"action":"insert","lines":["    "]}],[{"start":{"row":53,"column":4},"end":{"row":53,"column":152},"action":"insert","lines":["artifact_path_learning_curve_RL = \"mlflow-artifacts:/568376531369023149/19a0e0342f0a4bdaaab2ebf89b62ca92/artifacts/plots/precision_recall_curve.png\""],"id":34}],[{"start":{"row":53,"column":152},"end":{"row":54,"column":0},"action":"insert","lines":["",""],"id":35},{"start":{"row":54,"column":0},"end":{"row":54,"column":4},"action":"insert","lines":["    "]}],[{"start":{"row":54,"column":4},"end":{"row":54,"column":152},"action":"insert","lines":["artifact_path_learning_curve_RL = \"mlflow-artifacts:/568376531369023149/19a0e0342f0a4bdaaab2ebf89b62ca92/artifacts/plots/precision_recall_curve.png\""],"id":36}],[{"start":{"row":53,"column":34},"end":{"row":53,"column":35},"action":"remove","lines":["L"],"id":39},{"start":{"row":53,"column":33},"end":{"row":53,"column":34},"action":"remove","lines":["R"]}],[{"start":{"row":53,"column":33},"end":{"row":53,"column":34},"action":"insert","lines":["K"],"id":40}],[{"start":{"row":54,"column":34},"end":{"row":54,"column":35},"action":"remove","lines":["L"],"id":41},{"start":{"row":54,"column":33},"end":{"row":54,"column":34},"action":"remove","lines":["R"]}],[{"start":{"row":54,"column":33},"end":{"row":54,"column":34},"action":"insert","lines":["K"],"id":42}],[{"start":{"row":53,"column":18},"end":{"row":53,"column":32},"action":"remove","lines":["learning_curve"],"id":44},{"start":{"row":53,"column":18},"end":{"row":53,"column":34},"action":"insert","lines":["confusion_matrix"]}],[{"start":{"row":54,"column":18},"end":{"row":54,"column":32},"action":"remove","lines":["learning_curve"],"id":45},{"start":{"row":54,"column":18},"end":{"row":54,"column":34},"action":"insert","lines":["confusion_matrix"]}],[{"start":{"row":54,"column":34},"end":{"row":54,"column":35},"action":"insert","lines":["%"],"id":46}],[{"start":{"row":54,"column":34},"end":{"row":54,"column":35},"action":"remove","lines":["%"],"id":47}],[{"start":{"row":54,"column":34},"end":{"row":54,"column":35},"action":"insert","lines":["p"],"id":48}],[{"start":{"row":54,"column":34},"end":{"row":54,"column":35},"action":"remove","lines":["p"],"id":49}],[{"start":{"row":54,"column":34},"end":{"row":54,"column":35},"action":"insert","lines":["p"],"id":50}],[{"start":{"row":54,"column":34},"end":{"row":54,"column":35},"action":"remove","lines":["p"],"id":51}],[{"start":{"row":54,"column":34},"end":{"row":54,"column":35},"action":"insert","lines":["P"],"id":52},{"start":{"row":54,"column":35},"end":{"row":54,"column":36},"action":"insert","lines":["c"]}],[{"start":{"row":54,"column":42},"end":{"row":54,"column":150},"action":"remove","lines":["mlflow-artifacts:/568376531369023149/19a0e0342f0a4bdaaab2ebf89b62ca92/artifacts/plots/precision_recall_curve"],"id":53},{"start":{"row":54,"column":42},"end":{"row":54,"column":153},"action":"insert","lines":["mlflow-artifacts:/568376531369023149/ea1dbfe391ee4b7f9f41857daf6ce009/artifacts/plots/confusion_matrix_normaliz"]}],[{"start":{"row":54,"column":153},"end":{"row":54,"column":154},"action":"insert","lines":["e"],"id":54},{"start":{"row":54,"column":154},"end":{"row":54,"column":155},"action":"insert","lines":["d"]},{"start":{"row":54,"column":155},"end":{"row":54,"column":156},"action":"insert","lines":["_"]},{"start":{"row":54,"column":156},"end":{"row":54,"column":157},"action":"insert","lines":[":"]}],[{"start":{"row":54,"column":156},"end":{"row":54,"column":157},"action":"remove","lines":[":"],"id":55}],[{"start":{"row":54,"column":156},"end":{"row":54,"column":157},"action":"insert","lines":["t"],"id":56},{"start":{"row":54,"column":157},"end":{"row":54,"column":158},"action":"insert","lines":["e"]},{"start":{"row":54,"column":158},"end":{"row":54,"column":159},"action":"insert","lines":["s"]},{"start":{"row":54,"column":159},"end":{"row":54,"column":160},"action":"insert","lines":["t"]}],[{"start":{"row":53,"column":40},"end":{"row":53,"column":148},"action":"remove","lines":["mlflow-artifacts:/568376531369023149/19a0e0342f0a4bdaaab2ebf89b62ca92/artifacts/plots/precision_recall_curve"],"id":57},{"start":{"row":53,"column":40},"end":{"row":53,"column":151},"action":"insert","lines":["mlflow-artifacts:/568376531369023149/ea1dbfe391ee4b7f9f41857daf6ce009/artifacts/plots/confusion_matrix_counts_t"]}],[{"start":{"row":53,"column":151},"end":{"row":53,"column":152},"action":"insert","lines":["e"],"id":58},{"start":{"row":53,"column":152},"end":{"row":53,"column":153},"action":"insert","lines":["s"]},{"start":{"row":53,"column":153},"end":{"row":53,"column":154},"action":"insert","lines":["t"]}],[{"start":{"row":58,"column":108},"end":{"row":59,"column":0},"action":"insert","lines":["",""],"id":59},{"start":{"row":59,"column":0},"end":{"row":59,"column":4},"action":"insert","lines":["    "]}],[{"start":{"row":59,"column":4},"end":{"row":59,"column":108},"action":"insert","lines":["mlflow.artifacts.download_artifacts(artifact_uri=artifact_path_confusion_matrix_RL, dst_path=IMAGES_DIR)"],"id":60}],[{"start":{"row":59,"column":108},"end":{"row":60,"column":0},"action":"insert","lines":["",""],"id":61},{"start":{"row":60,"column":0},"end":{"row":60,"column":4},"action":"insert","lines":["    "]}],[{"start":{"row":60,"column":4},"end":{"row":60,"column":108},"action":"insert","lines":["mlflow.artifacts.download_artifacts(artifact_uri=artifact_path_confusion_matrix_RL, dst_path=IMAGES_DIR)"],"id":62}],[{"start":{"row":59,"column":85},"end":{"row":59,"column":86},"action":"remove","lines":["L"],"id":63},{"start":{"row":59,"column":84},"end":{"row":59,"column":85},"action":"remove","lines":["R"]}],[{"start":{"row":59,"column":84},"end":{"row":59,"column":85},"action":"insert","lines":["K"],"id":64}],[{"start":{"row":60,"column":85},"end":{"row":60,"column":86},"action":"remove","lines":["L"],"id":65},{"start":{"row":60,"column":84},"end":{"row":60,"column":85},"action":"remove","lines":["R"]}],[{"start":{"row":60,"column":84},"end":{"row":60,"column":85},"action":"insert","lines":["K"],"id":66}],[{"start":{"row":60,"column":83},"end":{"row":60,"column":84},"action":"insert","lines":["P"],"id":67},{"start":{"row":60,"column":84},"end":{"row":60,"column":85},"action":"insert","lines":["c"]}],[{"start":{"row":26,"column":23},"end":{"row":26,"column":62},"action":"remove","lines":["ec2-3-85-193-56.compute-1.amazonaws.com"],"id":69},{"start":{"row":26,"column":23},"end":{"row":26,"column":62},"action":"insert","lines":["ec2-3-95-175-57.compute-1.amazonaws.com"]}],[{"start":{"row":26,"column":23},"end":{"row":26,"column":62},"action":"remove","lines":["ec2-3-95-175-57.compute-1.amazonaws.com"],"id":70},{"start":{"row":26,"column":23},"end":{"row":26,"column":65},"action":"insert","lines":["ec2-34-236-154-42.compute-1.amazonaws.com "]}],[{"start":{"row":26,"column":64},"end":{"row":26,"column":65},"action":"remove","lines":[" "],"id":71}],[{"start":{"row":596,"column":47},"end":{"row":597,"column":0},"action":"insert","lines":["",""],"id":72},{"start":{"row":597,"column":0},"end":{"row":597,"column":12},"action":"insert","lines":["            "]},{"start":{"row":597,"column":12},"end":{"row":597,"column":13},"action":"insert","lines":["p"]},{"start":{"row":597,"column":13},"end":{"row":597,"column":14},"action":"insert","lines":["r"]},{"start":{"row":597,"column":14},"end":{"row":597,"column":15},"action":"insert","lines":["i"]},{"start":{"row":597,"column":15},"end":{"row":597,"column":16},"action":"insert","lines":["n"]},{"start":{"row":597,"column":16},"end":{"row":597,"column":17},"action":"insert","lines":["t"]}],[{"start":{"row":597,"column":17},"end":{"row":597,"column":19},"action":"insert","lines":["()"],"id":73}],[{"start":{"row":597,"column":18},"end":{"row":597,"column":19},"action":"insert","lines":["t"],"id":74},{"start":{"row":597,"column":19},"end":{"row":597,"column":20},"action":"insert","lines":["e"]},{"start":{"row":597,"column":20},"end":{"row":597,"column":21},"action":"insert","lines":["x"]},{"start":{"row":597,"column":21},"end":{"row":597,"column":22},"action":"insert","lines":["t"]},{"start":{"row":597,"column":22},"end":{"row":597,"column":23},"action":"insert","lines":["_"]},{"start":{"row":597,"column":23},"end":{"row":597,"column":24},"action":"insert","lines":["t"]},{"start":{"row":597,"column":24},"end":{"row":597,"column":25},"action":"insert","lines":["o"]},{"start":{"row":597,"column":25},"end":{"row":597,"column":26},"action":"insert","lines":["p"]}],[{"start":{"row":587,"column":4},"end":{"row":587,"column":39},"action":"remove","lines":["if os.path.exists(COMPARISON_JSON):"],"id":75},{"start":{"row":587,"column":0},"end":{"row":587,"column":4},"action":"remove","lines":["    "]},{"start":{"row":586,"column":32},"end":{"row":587,"column":0},"action":"remove","lines":["",""]}],[{"start":{"row":587,"column":0},"end":{"row":587,"column":4},"action":"remove","lines":["    "],"id":76},{"start":{"row":588,"column":0},"end":{"row":588,"column":4},"action":"remove","lines":["    "]},{"start":{"row":589,"column":0},"end":{"row":589,"column":4},"action":"remove","lines":["    "]},{"start":{"row":591,"column":0},"end":{"row":591,"column":4},"action":"remove","lines":["    "]},{"start":{"row":592,"column":0},"end":{"row":592,"column":4},"action":"remove","lines":["    "]},{"start":{"row":593,"column":0},"end":{"row":593,"column":4},"action":"remove","lines":["    "]},{"start":{"row":594,"column":0},"end":{"row":594,"column":4},"action":"remove","lines":["    "]},{"start":{"row":595,"column":0},"end":{"row":595,"column":4},"action":"remove","lines":["    "]},{"start":{"row":596,"column":0},"end":{"row":596,"column":4},"action":"remove","lines":["    "]},{"start":{"row":598,"column":0},"end":{"row":598,"column":4},"action":"remove","lines":["    "]},{"start":{"row":599,"column":0},"end":{"row":599,"column":4},"action":"remove","lines":["    "]},{"start":{"row":601,"column":0},"end":{"row":601,"column":4},"action":"remove","lines":["    "]},{"start":{"row":602,"column":0},"end":{"row":602,"column":4},"action":"remove","lines":["    "]},{"start":{"row":603,"column":0},"end":{"row":603,"column":4},"action":"remove","lines":["    "]},{"start":{"row":604,"column":0},"end":{"row":604,"column":4},"action":"remove","lines":["    "]},{"start":{"row":605,"column":0},"end":{"row":605,"column":4},"action":"remove","lines":["    "]},{"start":{"row":606,"column":0},"end":{"row":606,"column":4},"action":"remove","lines":["    "]},{"start":{"row":607,"column":0},"end":{"row":607,"column":4},"action":"remove","lines":["    "]}],[{"start":{"row":582,"column":19},"end":{"row":582,"column":40},"action":"remove","lines":["./pagina/summary.json"],"id":77},{"start":{"row":582,"column":19},"end":{"row":582,"column":39},"action":"insert","lines":["/pagina/summary.json"]}],[{"start":{"row":582,"column":19},"end":{"row":582,"column":20},"action":"insert","lines":["."],"id":78}],[{"start":{"row":586,"column":0},"end":{"row":586,"column":32},"action":"remove","lines":["    # 1) Opción JSON (preferida)"],"id":79},{"start":{"row":585,"column":17},"end":{"row":586,"column":0},"action":"remove","lines":["",""]}],[{"start":{"row":594,"column":43},"end":{"row":595,"column":0},"action":"insert","lines":["",""],"id":80},{"start":{"row":595,"column":0},"end":{"row":595,"column":8},"action":"insert","lines":["        "]},{"start":{"row":595,"column":8},"end":{"row":595,"column":9},"action":"insert","lines":["p"]},{"start":{"row":595,"column":9},"end":{"row":595,"column":10},"action":"insert","lines":["r"]},{"start":{"row":595,"column":10},"end":{"row":595,"column":11},"action":"insert","lines":["i"]},{"start":{"row":595,"column":11},"end":{"row":595,"column":12},"action":"insert","lines":["n"]},{"start":{"row":595,"column":12},"end":{"row":595,"column":13},"action":"insert","lines":["t"]}],[{"start":{"row":595,"column":13},"end":{"row":595,"column":15},"action":"insert","lines":["()"],"id":81}],[{"start":{"row":595,"column":14},"end":{"row":595,"column":16},"action":"insert","lines":["\"\""],"id":82}],[{"start":{"row":595,"column":15},"end":{"row":595,"column":16},"action":"insert","lines":["S"],"id":83},{"start":{"row":595,"column":16},"end":{"row":595,"column":17},"action":"insert","lines":["A"]},{"start":{"row":595,"column":17},"end":{"row":595,"column":18},"action":"insert","lines":["P"]}],[{"start":{"row":595,"column":17},"end":{"row":595,"column":18},"action":"remove","lines":["P"],"id":84},{"start":{"row":595,"column":16},"end":{"row":595,"column":17},"action":"remove","lines":["A"]},{"start":{"row":595,"column":15},"end":{"row":595,"column":16},"action":"remove","lines":["S"]}],[{"start":{"row":595,"column":15},"end":{"row":595,"column":16},"action":"insert","lines":["I"],"id":85},{"start":{"row":595,"column":16},"end":{"row":595,"column":17},"action":"insert","lines":["A"]}],[{"start":{"row":584,"column":0},"end":{"row":607,"column":92},"action":"remove","lines":["@app.get(\"/comparison\")","def comparison():","    try:","        with open(COMPARISON_JSON, \"r\", encoding=\"utf-8\") as f:","            data = json.load(f)","","        text_top    = data.get(\"text_top\", \"\")","        text_bottom = data.get(\"text_bottom\", \"\")","        table       = data.get(\"table\", {})","        headers     = table.get(\"headers\", [])","        rows        = table.get(\"rows\", [])","        print(\"IA\")","        print(text_top)","","        if not headers or not rows:","            raise ValueError(\"Estructura de 'table' inválida en JSON.\")","","        return JSONResponse(content={","            \"text_top\": text_top,","            \"table\": {\"headers\": headers, \"rows\": rows},","            \"text_bottom\": text_bottom","        })","    except Exception as e:","        raise HTTPException(status_code=500, detail=f\"Error leyendo {COMPARISON_JSON}: {e}\")"],"id":86},{"start":{"row":584,"column":0},"end":{"row":624,"column":40},"action":"insert","lines":["@app.get(\"/comparison\")","def comparison():","    # 1) Verificación de existencia","    if not COMPARISON_JSON.exists():","        raise HTTPException(","            status_code=404,","            detail=f\"No se encontró el archivo: {COMPARISON_JSON}\"","        )","","    # 2) Carga segura del JSON","    try:","        with open(COMPARISON_JSON, \"r\", encoding=\"utf-8\") as f:","            data = json.load(f)","    except json.JSONDecodeError as e:","        raise HTTPException(","            status_code=400,","            detail=f\"JSON inválido en {COMPARISON_JSON}: {e}\"","        )","    except Exception as e:","        raise HTTPException(","            status_code=500,","            detail=f\"No se pudo leer {COMPARISON_JSON}: {e}\"","        )","","    # 3) Extracción con defaults","    text_top    = data.get(\"text_top\") or \"\"","    text_bottom = data.get(\"text_bottom\") or \"\"","    table       = data.get(\"table\") or {}","    headers     = table.get(\"headers\") or []","    rows        = table.get(\"rows\") or []","","    # 4) Respuesta SIEMPRE válida para el front (aunque falten headers/rows)","    payload = {","        \"text_top\": text_top,","        \"table\": {","            \"headers\": headers,","            \"rows\": rows","        },","        \"text_bottom\": text_bottom","    }","    return JSONResponse(content=payload)"]}],[{"start":{"row":584,"column":0},"end":{"row":624,"column":40},"action":"remove","lines":["@app.get(\"/comparison\")","def comparison():","    # 1) Verificación de existencia","    if not COMPARISON_JSON.exists():","        raise HTTPException(","            status_code=404,","            detail=f\"No se encontró el archivo: {COMPARISON_JSON}\"","        )","","    # 2) Carga segura del JSON","    try:","        with open(COMPARISON_JSON, \"r\", encoding=\"utf-8\") as f:","            data = json.load(f)","    except json.JSONDecodeError as e:","        raise HTTPException(","            status_code=400,","            detail=f\"JSON inválido en {COMPARISON_JSON}: {e}\"","        )","    except Exception as e:","        raise HTTPException(","            status_code=500,","            detail=f\"No se pudo leer {COMPARISON_JSON}: {e}\"","        )","","    # 3) Extracción con defaults","    text_top    = data.get(\"text_top\") or \"\"","    text_bottom = data.get(\"text_bottom\") or \"\"","    table       = data.get(\"table\") or {}","    headers     = table.get(\"headers\") or []","    rows        = table.get(\"rows\") or []","","    # 4) Respuesta SIEMPRE válida para el front (aunque falten headers/rows)","    payload = {","        \"text_top\": text_top,","        \"table\": {","            \"headers\": headers,","            \"rows\": rows","        },","        \"text_bottom\": text_bottom","    }","    return JSONResponse(content=payload)"],"id":87},{"start":{"row":584,"column":0},"end":{"row":610,"column":6},"action":"insert","lines":["@app.get(\"/comparison\")","def comparison():","    if not os.path.exists(COMPARISON_JSON):","        raise HTTPException(","            status_code=404,","            detail=f\"No se encontró el archivo: {COMPARISON_JSON}\"","        )","","    try:","        with open(COMPARISON_JSON, \"r\", encoding=\"utf-8\") as f:","            data = json.load(f)","    except json.JSONDecodeError as e:","        raise HTTPException(status_code=400, detail=f\"JSON inválido: {e}\")","    except Exception as e:","        raise HTTPException(status_code=500, detail=f\"No se pudo leer JSON: {e}\")","","    text_top    = data.get(\"text_top\") or \"\"","    text_bottom = data.get(\"text_bottom\") or \"\"","    table       = data.get(\"table\") or {}","    headers     = table.get(\"headers\") or []","    rows        = table.get(\"rows\") or []","","    return JSONResponse(content={","        \"text_top\": text_top,","        \"table\": {\"headers\": headers, \"rows\": rows},","        \"text_bottom\": text_bottom","    })"]}],[{"start":{"row":582,"column":20},"end":{"row":582,"column":27},"action":"remove","lines":["/pagina"],"id":88}],[{"start":{"row":2,"column":58},"end":{"row":3,"column":0},"action":"insert","lines":["",""],"id":89}],[{"start":{"row":3,"column":0},"end":{"row":3,"column":32},"action":"insert","lines":["import json   # <-- faltaba esto"],"id":90}],[{"start":{"row":3,"column":31},"end":{"row":3,"column":32},"action":"remove","lines":["o"],"id":91},{"start":{"row":3,"column":30},"end":{"row":3,"column":31},"action":"remove","lines":["t"]},{"start":{"row":3,"column":29},"end":{"row":3,"column":30},"action":"remove","lines":["s"]},{"start":{"row":3,"column":28},"end":{"row":3,"column":29},"action":"remove","lines":["e"]},{"start":{"row":3,"column":27},"end":{"row":3,"column":28},"action":"remove","lines":[" "]},{"start":{"row":3,"column":26},"end":{"row":3,"column":27},"action":"remove","lines":["a"]},{"start":{"row":3,"column":25},"end":{"row":3,"column":26},"action":"remove","lines":["b"]},{"start":{"row":3,"column":24},"end":{"row":3,"column":25},"action":"remove","lines":["a"]},{"start":{"row":3,"column":23},"end":{"row":3,"column":24},"action":"remove","lines":["t"]},{"start":{"row":3,"column":22},"end":{"row":3,"column":23},"action":"remove","lines":["l"]},{"start":{"row":3,"column":21},"end":{"row":3,"column":22},"action":"remove","lines":["a"]},{"start":{"row":3,"column":20},"end":{"row":3,"column":21},"action":"remove","lines":["f"]},{"start":{"row":3,"column":19},"end":{"row":3,"column":20},"action":"remove","lines":[" "]},{"start":{"row":3,"column":18},"end":{"row":3,"column":19},"action":"remove","lines":["-"]},{"start":{"row":3,"column":17},"end":{"row":3,"column":18},"action":"remove","lines":["-"]},{"start":{"row":3,"column":16},"end":{"row":3,"column":17},"action":"remove","lines":["<"]},{"start":{"row":3,"column":15},"end":{"row":3,"column":16},"action":"remove","lines":[" "]},{"start":{"row":3,"column":14},"end":{"row":3,"column":15},"action":"remove","lines":["#"]},{"start":{"row":3,"column":13},"end":{"row":3,"column":14},"action":"remove","lines":[" "]},{"start":{"row":3,"column":12},"end":{"row":3,"column":13},"action":"remove","lines":[" "]},{"start":{"row":3,"column":11},"end":{"row":3,"column":12},"action":"remove","lines":[" "]}]]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":3,"column":11},"end":{"row":3,"column":11},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":579,"state":"start","mode":"ace/mode/python"}},"timestamp":1758049209194,"hash":"dbfb1bfc554c8ad45682f6f93798b42fc487a43b"}